!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CardDragSort={},e.Vue)}(this,(function(e,t){"use strict";var n=document.createElement("style");n.textContent=".card-drag-sort[data-v-f5bef8f1]{position:relative;width:100%;height:var(--71e69bc3)}.card-drag-sort .card-wrap[data-v-f5bef8f1]{position:absolute;display:flex;flex-direction:column;overflow:hidden;border-radius:5px;box-shadow:0 0 8px #ccc;transition:all .4s}.card-drag-sort .card-wrap .card-header[data-v-f5bef8f1]{height:50px;-webkit-user-select:none;user-select:none;cursor:move;border-bottom:1px solid #e0e0e0}.card-drag-sort .card-wrap .card-title[data-v-f5bef8f1]{line-height:49px;font-size:14px;color:gray;background-color:#fff;padding:0 15px}.card-drag-sort .card-wrap .empty-text[data-v-f5bef8f1]{height:100%;background-color:#fff;display:flex;justify-content:center;align-items:center;font-size:14px;color:gray}\n",document.head.appendChild(n);const o=["id","tabIndex"],d=["onMousedown"],r={class:"card-title"},a=(e=>(t.pushScopeId("data-v-f5bef8f1"),e=e(),t.popScopeId(),e))((()=>t.createElementVNode("div",{class:"empty-text"},"暂无内容",-1))),i=((e,t)=>{const n=e.__vccOpts||e;for(const[o,d]of t)n[o]=d;return n})(t.defineComponent({name:"CardDragSort",__name:"index",props:{data:{type:Array,required:!0},columns:{type:Number,default:3},width:{type:Number,default:500},height:{type:Number,default:400},columnSpace:{type:Number,default:20},rowSpace:{type:Number,default:20}},setup(e){t.useCssVars((e=>({"71e69bc3":i.value})));const n=e,i=t.computed((()=>{const e=n.data.length;return Math.ceil(e/n.columns-1)*(n.height+n.rowSpace)+n.height+"px"}));function l(e){return Math.floor(e/n.columns)*(n.height+n.rowSpace)+"px"}function s(e){return e%n.columns*(n.width+n.columnSpace)+"px"}let c,f,p,u,m,x,y,h,g=0,v=0,b=0;function w(e){g=p+(e.clientY-m),v=u+(e.clientX-x),c.style.top=g+b+"px",c.style.left=v+"px",h=setTimeout((()=>{!function(e,t){const o=Array.from(E.value.children);for(const d of o){const o=e-parseInt(d.style.top),r=t-parseInt(d.style.left);if(Math.abs(o)<n.height/2&&Math.abs(r)<n.width/2&&f&&d.id!==f.id){const e=n.data.find((e=>d.tabIndex===e.index));if(!e||e.id===f.id)return;const t=f.index>e.index;if(t){let t=n.data.filter((t=>t.index>=e.index&&t.index<f.index));f.index=e.index;for(const e of t){e.index=e.index+1;const t=document.getElementById(e.id);t&&(t.style.top=l(e.index),t.style.left=s(e.index))}}if(!t){let t=n.data.filter((t=>t.index<=e.index&&t.index>f.index));f.index=e.index;for(const e of t){e.index=e.index-1;const t=document.getElementById(e.id);t&&(t.style.top=l(e.index),t.style.left=s(e.index))}}}}}(parseInt(c.style.top),parseInt(c.style.left)),clearTimeout(h)}),400)}const E=t.ref();function I(){document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",I),document.removeEventListener("scroll",S),c.style.transition="all 0.4s",c.style.top=p+"px",c.style.left=u+"px",c.style.zIndex="0",c.style.top=l(f.index),c.style.left=s(f.index)}function S(){b=document.documentElement.scrollTop-y,c.style.top=g+b+"px"}return(i,h)=>(t.openBlock(),t.createElementBlock("div",{class:"card-drag-sort",ref_key:"cardDrag",ref:E},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.data,(h=>(t.openBlock(),t.createElementBlock("div",{class:"card-wrap",key:h.id,id:h.id,tabIndex:h.index,style:t.normalizeStyle({width:`${e.width}px`,height:`${e.height}px`,top:l(h.index),left:s(h.index)})},[t.createElementVNode("div",{class:"card-header",onMousedown:e=>function(e,t){const o=document.getElementById(t);o&&(c=o,f=n.data.find((e=>e.id===t)),p=parseInt(c.style.top),u=parseInt(c.style.left),c.style.zIndex="100",c.style.transition="none",m=e.clientY,x=e.clientX,y=document.documentElement.scrollTop,document.addEventListener("mousemove",w),document.addEventListener("mouseup",I),document.addEventListener("scroll",S))}(e,h.id)},[t.renderSlot(i.$slots,"header",{item:h},(()=>[t.createElementVNode("div",r,t.toDisplayString(h.title),1)]),!0)],40,d),t.renderSlot(i.$slots,"content",{item:h},(()=>[a]),!0)],12,o)))),128))],512))}}),[["__scopeId","data-v-f5bef8f1"]]),l=[i];e.CardDragSort=i,e.default=e=>{l.forEach((t=>{e.component(t.__name,t)}))},Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
